- name: Deploy impl_space to Hugging Face Space
  env:
    HF_TOKEN: ${{ secrets.HF_TOKEN }}
    HF_USERNAME: ${{ secrets.HF_USERNAME }}
    HF_SPACE: ${{ secrets.HF_SPACE }}
  run: |
    cd impl_space

    git init
    git config user.email "ci@example.com"
    git config user.name "github-actions[bot]"

    git add .
    git commit -m "Deploy from GitHub Actions ${GITHUB_SHA}"

    # ここが問題になってるので厳しめに 1 行で・ダブルクォートで囲む
    git remote add origin "https://${HF_USERNAME}:${HF_TOKEN}@huggingface.co/spaces/${HF_USERNAME}/${HF_SPACE}"

    # master → main に揃えて push（HF 側が main 前提なことが多い）
    git branch -M main
    git push --force origin main
